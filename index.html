<html>
<head>
<meta charset="utf-8">
<title>Ops Metrics Data</title>
<link rel="stylesheet" href="./css/bootstrap.min.css">
<link rel="stylesheet" href="./css/bootstrap-theme.min.css">
<link rel="stylesheet" href="./css/angular-chart.min.css">

<script type="text/javascript" src="./js/angular.min.js"></script>
<script type="text/javascript" src="./js/jquery-1.12.0.min.js"></script>
<script type="text/javascript" src="./js/bootstrap.min.js"></script>
<script type="text/javascript" src="./js/underscore-min.js"></script>
<script type="text/javascript" src="./js/chart.js"></script>
<script type="text/javascript" src="./js/angular-chart.min.js"></script>

<script type="text/javascript" src="./js/metrics.js"></script>
</head>
<body>
	<div id="metrics" ng-app="metricsApp" ng-controller="metricsCtrl">
		<loading></loading>
		<div class="alert alert-danger" role="alert" hidden="true"></div>
		<div ng-if="total.applicationsCount" style="font-size: 24px">
			<p>Totals Per foundation:</p>
			<span class="label label-success label-as-badge">Total
				Orgs:{{total.orgsCount}}</span> <span
				class="label label-success label-as-badge">Total Spaces :
				{{total.spacesCount}}</span> <span
				class="label label-success label-as-badge">Total Apps Count :
				{{total.applicationsCount}}</span> <span
				class="label label-success label-as-badge">Total CF Users :
				{{total.usersCount}}</span> <span
				class="label label-success label-as-badge">Total Routes :
				{{total.routesCount}}</span> <span
				class="label label-success label-as-badge">Total Buildpacks :
				{{total.buildpacksCount}}</span> <span
				class="label label-success label-as-badge">Total Services :
				{{total.servicesCount}}</span> <span
				class="label label-success label-as-badge">Total Service
				Brokers : {{total.serviceBrokersCount}}</span> <span
				class="label label-success label-as-badge">Total Service
				Instances : {{total.serviceInstancesCount}}</span> <span
				class="label label-success label-as-badge">Total AI Count :
				{{total_ai_count}}</span> <span class="label label-success label-as-badge">Total
				App Create Events Count : {{total.appCreateEventsCount}}</span> <span
				class="label label-success label-as-badge">Total App Delete
				Events Count : {{total.appDeleteEventsCount}}</span> <span
				class="label label-success label-as-badge">Total App Update
				Events Count : {{total.appUpdateEventsCount}}</span> <span
				class="label label-success label-as-badge">Total App Crash
				Events Count : {{total.appCrashEventsCount}}</span> <span
				class="label label-success label-as-badge">Total App Start
				Events Count : {{total.appStartEventsCount}}</span> <span
				class="label label-success label-as-badge">Total App Stop
				Events Count : {{total.appStopEventsCount}}</span> <span
				class="label label-success label-as-badge">Total App SSH
				Authorized Events Count : {{total.appAuthorizedSSHEventsCount}}</span> <span
				class="label label-success label-as-badge">Total App SSH
				UnAuthorized Events Count : {{total.appUnAuthorizedSSHEventsCount}}</span>
		</div>

		<div ng-repeat="deploymentChart in deploymentChartMap">
			<div ng-show="deploymentChart.chartMeta.healthydata.length">
				<div class="col-lg-6 col-md-10 ng-scope">
					<div class="panel panel-success">
						<div class="panel-heading">{{deploymentChart.deploymentname}}
							- Total Running Jobs -
							{{deploymentChart.chartMeta.healthylabels.length}} - (Running
							Jobs - CPU Per User %)</div>
						<div class="panel-body">
							<div class="chart-container">
								<canvas id="{{deploymentChart.deploymentname}} - Healthy"
									class="chart chart-doughnut"
									chart-data="deploymentChart.chartMeta.healthydata"
									chart-labels="deploymentChart.chartMeta.healthylabels"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div ng-show="deploymentChart.chartMeta.unhealthydata.length">
				<div class="col-lg-6 col-md-10 ng-scope">
					<div class="panel panel-danger">
						<div class="panel-heading">
							{{deploymentChart.deploymentname}} - Total Failed Jobs -
							{{deploymentChart.chartMeta.unhealthylabels.length}} - (Failed
							Jobs - System CPU %)</div>
						<div class="panel-body">
							<div class="chart-container">
								<canvas id="{{deploymentChart.deploymentname}} - UnHealthy"
									class="chart chart-pie"
									chart-data="deploymentChart.chartMeta.unhealthydata"
									chart-labels="deploymentChart.chartMeta.unhealthylabels"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div ng-if="vmMetrics">
			<div collapse-toggler class="toggler">
				<a href="#"><i class="glyphicon glyphicon-chevron-down"></i> All
					VM Metrics</a>
			</div>
			<div class="table-responsive collapse">
				<table id="vmMetricsTable" class="table">
					<thead>
						<tr>
							<td>Deployment Name</td>
							<td>Job Name</td>
							<td>Job IP</td>
							<td>Job Index</td>
							<td>system.healthy</td>
							<td>system.load.1m</td>
							<td>system.swap.percent</td>
							<td>system.swap.kb</td>
							<td>system.cpu.user</td>
							<td>system.disk.ephemeral.inode.percent</td>
							<td>system.disk.ephemeral.percent</td>
							<td>system.disk.system.percent</td>
							<td>system.cpu.sys</td>
							<td>system.disk.persistent.percent</td>
							<td>system.mem.kb</td>
							<td>system.cpu.wait</td>
							<td>system.mem.percent</td>
							<td>system.disk.system.inode.percent</td>
							<td>system.disk.persistent.inode.percent</td>
						</tr>
					</thead>
					<tbody>
						<tr
							ng-repeat="vmMetric in vmMetrics | orderBy:'jobDetail.deployment'">
							<td>{{vmMetric.jobDetail.deployment}}</td>
							<td>{{vmMetric.jobDetail.job}}</td>
							<td>{{vmMetric.jobDetail.ip}}</td>
							<td>{{vmMetric.jobDetail.index}}</td>
							<td class="success"
								ng-if="vmMetric.fixedAttribute.system_healthy == '1.0'">Healthy</td>
							<td class="danger"
								ng-if="vmMetric.fixedAttribute.system_healthy != '1.0'">Unhealthy</td>
							<td>{{vmMetric.fixedAttribute.system_load_1m}}</td>
							<td>{{vmMetric.fixedAttribute.system_swap_percent}}</td>
							<td>{{vmMetric.fixedAttribute.system_swap_kb}}</td>
							<td>{{vmMetric.fixedAttribute.system_cpu_user}}</td>
							<td>{{vmMetric.fixedAttribute.system_disk_ephemeral_inode_percent}}</td>
							<td>{{vmMetric.fixedAttribute.system_disk_ephemeral_percent}}</td>
							<td>{{vmMetric.fixedAttribute.system_disk_system_percent}}</td>
							<td>{{vmMetric.fixedAttribute.system_cpu_sys}}</td>
							<td>{{vmMetric.fixedAttribute.system_disk_persistent_percent}}</td>
							<td>{{vmMetric.fixedAttribute.system_mem_kb}}</td>
							<td>{{vmMetric.fixedAttribute.system_cpu_wait}}</td>
							<td>{{vmMetric.fixedAttribute.system_mem_percent}}</td>
							<td>{{vmMetric.fixedAttribute.system_disk_system_inode_percent}}</td>
							<td>{{vmMetric.fixedAttribute.system_disk_persistent_inode_percent}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<div
			ng-repeat="customJobMetric in customJobMetrics | orderBy:'jobDetail.deployment'">
			<div collapse-toggler class="toggler">
				<a href="#"><i class="glyphicon glyphicon-chevron-down"></i>
					{{customJobMetric.jobDetail.deployment}} |
					{{customJobMetric.jobDetail.job}} |
					{{customJobMetric.jobDetail.ip}} |
					{{customJobMetric.jobDetail.index}}</a>
			</div>
			<div class="collapse">
				<table class="table table-striped table-bordered" cellspacing="0"
					width="100%">
					<tr>
						<td>Attribute Name</td>
						<td>Attribute Value</td>
					</tr>
					<tr ng-repeat="attribute in customJobMetric.customAttributes">
						<td>{{attribute.name}}</td>
						<td>{{attribute.value}}</td>
					</tr>
				</table>
			</div>
		</div>

		<div ng-if="orgs">
			<div collapse-toggler class="toggler">
				<a href="#"><i class="glyphicon glyphicon-chevron-down"></i> All
					Orgs</a>
			</div>
			<div class="collapse">
				<table class="table table-striped table-bordered" cellspacing="0"
					width="100%">
					<tr>
						<td>Org Name</td>
						<td>Org GUID</td>
					</tr>
					<tr ng-repeat="org in orgs">
						<td>{{org.name}}</td>
						<td>{{org.meta.guid}}</td>
					</tr>
				</table>
			</div>
		</div>

		<div ng-if="spaces">
			<div collapse-toggler class="toggler">
				<a href="#"><i class="glyphicon glyphicon-chevron-down"></i> All
					Spaces</a>
			</div>
			<div class="collapse">
				<table class="table table-striped table-bordered" cellspacing="0"
					width="100%">
					<tr>

						<td>Org Name</td>
						<td>Space Name</td>
						<td>Space GUID</td>
						<td>Space URL</td>
						<td>No of Applications</td>
						<td>No of Application Instances</td>
					</tr>
					<tr ng-repeat="space in spaces | orderBy: 'organization.name'">
						<td>{{space.organization.name}}</td>
						<td>{{space.name}}</td>
						<td>{{space.meta.guid}}</td>
						<td>{{space.meta.url}}</td>
						<td>{{space.number_of_apps}}</td>
						<td>{{space.number_of_app_instances}}</td>
					</tr>
				</table>
			</div>
		</div>

		<div ng-if="apps">
			<div collapse-toggler class="toggler">
				<a href="#"><i class="glyphicon glyphicon-chevron-down"></i> All
					Applications</a>
			</div>
			<div class="collapse">
				<table class="table table-striped table-bordered" cellspacing="0"
					width="100%">
					<tr>
						<td>Application Name</td>
						<td>Application URIs</td>
						<td>Application Instances</td>
						<td>Running Instances</td>
						<td>Memory</td>
						<td>Disk Quota</td>
						<td>Space GUID</td>
						<td>Space Name</td>
						<td>Org Name</td>
					</tr>
					<tr ng-repeat="app in apps">
						<td>{{app.name}}</td>
						<td>{{app.uris}}</td>
						<td>{{app.instances}}</td>
						<td>{{app.runningInstances}}</td>
						<td>{{app.memory}}</td>
						<td>{{app.diskQuota}}</td>
						<td>{{app.space.meta.guid}}</td>
						<td>{{app.space_name}}</td>
						<td>{{app.org_name}}</td>
					</tr>
				</table>
			</div>
		</div>

	</div>
</body>
</html>
